{% include "floybd/header.html" %}
{# Display a form #}
{% load i18n %}
{% trans "Get Values" as getValues %}
{% trans "Send Values to LG" as sendValues %}


{% load coma_point %}

<div class="container">

	{% if concreteStation != None %}

		<center>
			<h3>Viewing weather for <b>{{  concreteStation.name }}</b> on <b>{{  date }}</b> </h3>

		<form name="form" action="{% url 'floybd:sendConcreteValuesToLG' %}" method="post" class="form">
			{% csrf_token %}
			<input type="hidden" name="weatherData" value="{{  weatherData }}">
			<input type="hidden" name="date" value="{{  date }}">
			<input type="hidden" name="station" value="{{ concreteStation.station_id }}">
			<input type="submit" value="{{ sendValues }}" class="btn btn-default"/>
			<input type="button" value="Go Back" onclick="javascript:history.back()" class="btn btn-default"/>
		</form>
		</center>
		<div class="span6 center-block" id="map" style="height: 75%;width: 100%;"></div>
		<script>
		  var map;
		  function initMap() {
			map = new google.maps.Map(document.getElementById('map'), {
			  center: {lat: {{  concreteStation.latitude|coma_point }}, lng: {{ concreteStation.longitude|coma_point }}},
			  zoom: 8,
			  mapTypeId: google.maps.MapTypeId.HYBRID
			});

			 var infowindow = new google.maps.InfoWindow({
    			content: '{{ weatherData|safe }}'
  			});



			var myLatlng = new google.maps.LatLng({{  concreteStation.latitude|coma_point }},{{  concreteStation.longitude|coma_point }});
			var marker = new google.maps.Marker({
				position: myLatlng,
				map: map,
				draggable: false,
				title: '{{  concreteStation.name }}'
		 	 });

		 	  marker.addListener('click', function() {
    			infowindow.open(map, marker);
  				});

		  }
		</script>
		<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCL-aQfXs4a0-BSGR3VmoIYdvknXMVh-W8&callback=initMap"
		  async defer></script>


	{% endif %}
</div>